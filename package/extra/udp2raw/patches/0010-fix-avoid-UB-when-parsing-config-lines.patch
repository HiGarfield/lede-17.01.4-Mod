From 72ba990af351bf0e432354d31d6e083699957f71 Mon Sep 17 00:00:00 2001
From: HiGarfield <32226909+HiGarfield@users.noreply.github.com>
Date: Sat, 14 Feb 2026 16:49:27 +0800
Subject: [PATCH] fix: avoid UB when parsing config lines

---
 common.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

--- a/common.cpp
+++ b/common.cpp
@@ -984,9 +984,9 @@ string trim(const string &str, char c) {
 
 vector<string> parse_conf_line(const string &s0) {
     string s = s0;
-    s.reserve(s.length() + 200);
-    char *buf = (char *)s.c_str();
-    // char buf[s.length()+200];
+    vector<char> buf_storage(s.begin(), s.end());
+    buf_storage.push_back('\0');
+    char *buf = buf_storage.data();
     char *p = buf;
     int i = int(s.length()) - 1;
     int j;
